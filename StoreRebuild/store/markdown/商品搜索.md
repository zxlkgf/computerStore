## 9 商品搜索

### 9.1 关于商品的模糊搜索

---

#### 9.1.1 后端-持久层

#### 1.编写sql

```sql
SELECT id,title,sell_point,price,image
FROM t_product 
WHERE STATUS = 1
AND title LIKE '%${title}%' 
ORDER BY priority DESC;
```

---

#### 2.编写Mapper接口的抽象方法

```java
    /**
     * 按照输入的标题查找
     * @param title
     * @return
     */
    List<Product> findProductByTitle(String title);
```

---

#### 3.编写Mapper接口的映射文件

```xml
<!--    List<Product> findProductByTitle(String title);-->
    <select id="findProductByTitle">
        SELECT id,title,sell_point,price,image
        FROM t_product 
        WHERE STATUS = 1
        AND title LIKE '%${title}%' 
        ORDER BY priority DESC;
    </select>
```

---

### 9.1.2 后端-业务层

#### 1.处理异常

---

#### 2.编写业务层抽象方法

```java
    /**
     * 按照标题查询
     * @param title
     * @param pageNum
     * @param pageSize
     * @return
     */
    PageInfo<Product> findProductByTitle(String title,Integer pageNum, Integer pageSize);
```

---

#### 3.编写业务层逻辑

```java
    @Override
    public PageInfo<Product> findProductByTitle(String title, Integer pageNum, Integer pageSize) {
        //开启分页功能
        PageHelper.startPage(pageNum,pageSize);
        //查询结果
        List<Product> res = productMapper.findProductByTitle(title);
        //返回结果
        return new PageInfo<>(res);
    }
```

---

### 9.1.3 后端-控制层

---

#### 1.处理异常

---

#### 2.设计请求

请求路径：/product/findWithTitle 

请求参数：Integer pageNum，Integer pageSize，String title

请求类型：get

响应类型：JsonResult<PageInfo< Product>>

---

#### 3.处理请求，编写控制层方法

```java

```

----

#### 4.前端页面

```javascript

```

---
